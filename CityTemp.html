<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="./public/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500&display=swap" rel="stylesheet">

    <script src="https://kit.fontawesome.com/22766790f5.js" crossorigin="anonymous"></script>

    <title>Weather App</title>
</head>

<body>
    <div class="container">
        <div id="icon">
            <h1><i class="fa-solid fa-sun" style="color: rgb(166, 249, 0);"></i></h1>
        </div>

        <div class="info">
            <h1 class="location"><i class="fa-solid fa-location-dot"></i> {%location%}, {%country%}
            </h1>
            <p id="date">Wed | Dec 23 | 05:34</p>
            <h1 class="temp">{%tempval%}&deg;C</h1>
            <h4 class="weathercondition">{%condition%}</h4>
            <p class="temp-min/max">MIN {%tempmin%}&deg;C | MAX {%tempmax%}&deg;C</p>
        </div>
    </div>
</body>

<script>
    const currentdate = document.getElementById('date');
    const Wedcon = document.getElementById("icon");

    
    //function to get the current day of the week
    let getcurrentday = () => {
        const weekday = ["Sun", "Mon", "Tue", "Wed", "Thurs", "Fri", "Sat"];
        let currenttime = new Date();
        let day = weekday[currenttime.getDay()];
        return day;
    }
    
    //function to get the current month, time and date of the week
    let getcurrenttime = () => {
        const month = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
        
        let now = new Date();
        var currmonth = month[now.getMonth()];
        var date = now.getDate();
        
        let currmin = now.getMinutes();
        let currhour = now.getHours();
        let amORpm = "AM"
 
        let tempcondition = "{%tempstatus%}";
        
        if (currhour>0 && currhour<6){

                if (tempcondition == "Haze") {
                    Wedcon.innerHTML = '<h1><i class="fa-solid fa-smog"  style="color: #FAC668;"></i></h1>';
                }
                else if (tempcondition == "Rainy") {
                    Wedcon.innerHTML = '<h1><i class="fa-solid fa-cloud-moon-rain" style="color: white;"></i></h1>';
                }

                else if (tempcondition == "Clouds") {
                    Wedcon.innerHTML = '<h1><i class="fa-solid fa-cloud-moon" style="color: white;"></i></h1>';
                }
                else {
                    Wedcon.innerHTML = '<h1><i class="fa-solid fa-cloud-moon" style="color: white;"></i></h1>';
                }
            
        } 
        else {
            if (tempcondition == "Haze") {
                Wedcon.innerHTML = '<h1><i class="fa-solid fa-smog"  style="color:  #FAC668;"></i></h1>';
            }
            else if (tempcondition == "Rainy") {
                Wedcon.innerHTML = '<h1><i class="fa-solid fa-cloud-rain" style="color: #dcd7e3;"></i></h1>';
            }
            else if (tempcondition == "Sunny") {
                Wedcon.innerHTML = '<h1><i class="fa-solid fa-sun" style="color: yellow;"></i></h1>';
            }
            else if (tempcondition == "Clouds") {
                Wedcon.innerHTML = '<h1><i class="fa-solid fa-cloud" style="color: white;"></i></h1>';
            }
            else {
                Wedcon.innerHTML = '<h1><i class="fa-solid fa-cloud" style="color: white;"></i></h1>';
            }

        }
        if (currhour > 11) {
            amORpm = "PM";

            if (currhour > 12) {
                currhour = currhour - 12;

                if (currhour < 10) {
                    currhour = "0" + currhour;
                }
            }
        }
        if (currmin < 10) {
            currmin = "0" + currmin;
        }
        return `${currmonth} ${date} | ${currhour}:${currmin} ${amORpm} `
    }

    currentdate.innerHTML = getcurrentday() + " | " + getcurrenttime();
</script>
</html>